<h2 mat-dialog-title>{{ 'transactions.create.title' | translate }}</h2>

<form [formGroup]="transactionForm" (ngSubmit)="onSubmit()">
  <mat-dialog-content>
    <!-- Transaction Type -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>{{ 'transactions.table.type' | translate }}</mat-label>
      <mat-select formControlName="type">
        <mat-option [value]="TransactionType.Deposit">
          {{ 'transactions.type.deposit' | translate }}
        </mat-option>
        <mat-option [value]="TransactionType.Withdrawal">
          {{ 'transactions.type.withdrawal' | translate }}
        </mat-option>
      </mat-select>
      @if (transactionForm.get('type')?.hasError('required')) {
        <mat-error>{{ 'validation.required' | translate }}</mat-error>
      }
    </mat-form-field>

    <!-- Amount -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>{{ getAmountLabel() | translate }}</mat-label>
      <input matInput type="number" formControlName="amount" step="0.01" min="0.01" />
      @if (transactionForm.get('amount')?.hasError('required')) {
        <mat-error>{{ 'validation.required' | translate }}</mat-error>
      }
      @if (transactionForm.get('amount')?.hasError('min')) {
        <mat-error>{{ 'validation.min_amount' | translate }}</mat-error>
      }
    </mat-form-field>

    <!-- Currency -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>{{ 'accounts.currency' | translate }}</mat-label>
      <input matInput formControlName="currency" readonly />
      <mat-hint>{{ 'transactions.create.currency_hint' | translate }}</mat-hint>
    </mat-form-field>

    <!-- Description -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>{{ 'transactions.table.description' | translate }}</mat-label>
      <input matInput formControlName="description" />
      @if (transactionForm.get('description')?.hasError('required')) {
        <mat-error>{{ 'validation.required' | translate }}</mat-error>
      }
    </mat-form-field>

    <!-- Date -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>{{ 'transactions.table.date' | translate }}</mat-label>
      <input matInput [matDatepicker]="datePicker" formControlName="date" />
      <mat-datepicker-toggle matIconSuffix [for]="datePicker"></mat-datepicker-toggle>
      <mat-datepicker #datePicker></mat-datepicker>
      @if (transactionForm.get('date')?.hasError('required')) {
        <mat-error>{{ 'validation.required' | translate }}</mat-error>
      }
    </mat-form-field>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button type="button" (click)="cancel()" [disabled]="isSubmitting()">
      {{ 'common.cancel' | translate }}
    </button>
    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="transactionForm.invalid || isSubmitting()"
    >
      {{ 'transactions.create.submit' | translate }}
    </button>
  </mat-dialog-actions>
</form>
